<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>file data</title>
    <script>
        var dataset = "<sinhviens>";
            dataset += "<sinhvien>";
                dataset += "<mssv>K123456789</mssv>";
                dataset += "<hoTen>Quách Thị Bán Bún Bò</hoTen>";
                dataset += "<ngaySinh>7/7/1997</ngaySinh>";
                dataset += "<gioiTinh>Nữ</gioiTinh>";
            dataset += "</sinhvien>";
            dataset += "<sinhvien>";
                dataset += "<mssv>K12345000</mssv>";
                dataset += "<hoTen>Hồng Lâu Mộng</hoTen>"; 
                dataset += "<ngaySinh>2/2/1992</ngaySinh>";
                dataset += "<gioiTinh>Nam</gioiTinh>";
            dataset += "</sinhvien>";
            dataset += "<sinhvien>";
                dataset += "<mssv>K1674000</mssv>"; 
                dataset += "<hoTen>Hồ Văn Đồ</hoTen>";
                dataset += "<ngaySinh>2/7/1997</ngaySinh>";
                dataset += "<gioiTinh>Nam</gioiTinh>";
            dataset += "</sinhvien>";
        dataset += "</sinhviens>";
    </script>
    <style>
        tr:hover {
            background-color: yellow;
        }
    </style>
</head>
<body>
    <h3>Danh sách Sinh Viên:</h3>
    <table border="1">
        <thead>
            <tr>
                <th onclick="sortTable(0)">Mã sinh viên</th>
                <th onclick="sortTable(1)">Họ tên</th>
                <th onclick="sortTable(2)">Ngày sinh</th>
                <th onclick="sortTable(3)">Giới tính</th>
            </tr>
        </thead>
        <tbody id="tbodysinhvien">
            <!-- Nội dung sẽ được thêm bởi JavaScript -->
        </tbody>
    </table>
    <script>
        // Hàm nạp danh sách sinh viên từ XML
        function tai_danhsach_sinhvien() {
            var parser = new DOMParser(); 
            var xmlDoc = parser.parseFromString(dataset, "text/xml");

            var students = xmlDoc.getElementsByTagName("sinhvien");
            for (var i = 0; i < students.length; i++) {
                var sti = students[i];
                var mssv = sti.getElementsByTagName("mssv")[0].childNodes[0].nodeValue;
                var hoTen = sti.getElementsByTagName("hoTen")[0].childNodes[0].nodeValue;
                var ngaySinh = sti.getElementsByTagName("ngaySinh")[0].childNodes[0].nodeValue;
                var gioiTinh = sti.getElementsByTagName("gioiTinh")[0].childNodes[0].nodeValue;

                var tbodysinhvien = document.getElementById("tbodysinhvien");
                
                var tr = document.createElement("tr");
                tr.onclick = function() { openDetailPage(mssv); };  // Mở trang chi tiết khi click vào dòng
                tbodysinhvien.appendChild(tr);

                var tdmssv = document.createElement("td");
                tdmssv.innerText = mssv;
                tr.appendChild(tdmssv);

                var tdhoten = document.createElement("td");
                tdhoten.innerText = hoTen;
                tr.appendChild(tdhoten);

                var tdngaysinh = document.createElement("td");
                tdngaysinh.innerText = ngaySinh;
                tr.appendChild(tdngaysinh);

                var tdgioitinh = document.createElement("td");
                tdgioitinh.innerText = gioiTinh;
                tr.appendChild(tdgioitinh);
            }
        }

        // Hàm sắp xếp bảng theo cột
        function sortTable(colIndex) {
            var table = document.querySelector("table");
            var rows = Array.from(table.rows).slice(1);  // Lấy tất cả các hàng trừ tiêu đề
            var sortedRows = rows.sort(function(a, b) {
                var cellA = a.cells[colIndex].innerText.toLowerCase();
                var cellB = b.cells[colIndex].innerText.toLowerCase();
                if (cellA < cellB) return -1;
                if (cellA > cellB) return 1;
                return 0;
            });

            // Đưa các dòng đã sắp xếp vào lại bảng
            sortedRows.forEach(function(row) {
                table.appendChild(row);
            });
        }

        // Hàm mở trang chi tiết khi click vào dòng
        function openDetailPage(mssv) {
            window.location.href = "detail.html?mssv=" + mssv;
        }

        tai_danhsach_sinhvien();
    </script>
</body>
</html>
